
#import <Foundation/Foundation.h>

NSString *StringFromExceptData(Byte *data);        


//: icon_voice_plus_b
Byte layoutWorkerQuadTitle[] = {69, 17, 47, 14, 132, 130, 222, 73, 183, 79, 175, 9, 6, 213, 58, 52, 64, 63, 48, 71, 64, 58, 52, 54, 48, 65, 61, 70, 68, 48, 51, 106};

//: icon_receiver_voice_playing_006
Byte viewDarkText[] = {75, 31, 64, 7, 222, 171, 235, 41, 35, 47, 46, 31, 50, 37, 35, 37, 41, 54, 37, 50, 31, 54, 47, 41, 35, 37, 31, 48, 44, 33, 57, 41, 46, 39, 31, 240, 240, 246, 148};

//: icon_receiver_voice_playing_010
Byte themeEcruPath[] = {11, 31, 52, 9, 195, 235, 199, 70, 50, 53, 47, 59, 58, 43, 62, 49, 47, 49, 53, 66, 49, 62, 43, 66, 59, 53, 47, 49, 43, 60, 56, 45, 69, 53, 58, 51, 43, 252, 253, 252, 116};

//: icon_voice_play_b
Byte appFirePlatform[] = {63, 17, 28, 11, 169, 105, 162, 120, 253, 6, 156, 77, 71, 83, 82, 67, 90, 83, 77, 71, 73, 67, 84, 80, 69, 93, 67, 70, 61};

//: icon_receiver_voice_playing_005
Byte colorSingerPreference[] = {2, 31, 85, 12, 80, 31, 41, 248, 227, 219, 207, 84, 20, 14, 26, 25, 10, 29, 16, 14, 16, 20, 33, 16, 29, 10, 33, 26, 20, 14, 16, 10, 27, 23, 12, 36, 20, 25, 18, 10, 219, 219, 224, 120};

//: icon_receiver_voice_playing_009
Byte viewMotiveError[] = {53, 31, 90, 10, 13, 161, 161, 103, 158, 131, 15, 9, 21, 20, 5, 24, 11, 9, 11, 15, 28, 11, 24, 5, 28, 21, 15, 9, 11, 5, 22, 18, 7, 31, 15, 20, 13, 5, 214, 214, 223, 161};

//: icon_receiver_voice_playing_002
Byte coreTotaloOvaData[] = {62, 31, 12, 14, 239, 83, 14, 255, 70, 40, 65, 62, 7, 223, 93, 87, 99, 98, 83, 102, 89, 87, 89, 93, 106, 89, 102, 83, 106, 99, 93, 87, 89, 83, 100, 96, 85, 109, 93, 98, 91, 83, 36, 36, 38, 97};

//: icon_receiver_voice_playing_007
Byte widgetDessertValue[] = {62, 31, 69, 7, 186, 215, 66, 36, 30, 42, 41, 26, 45, 32, 30, 32, 36, 49, 32, 45, 26, 49, 42, 36, 30, 32, 26, 43, 39, 28, 52, 36, 41, 34, 26, 235, 235, 242, 241};

//: icon_receiver_voice_playing_008
Byte themePermissionTimer[] = {61, 31, 81, 6, 92, 201, 24, 18, 30, 29, 14, 33, 20, 18, 20, 24, 37, 20, 33, 14, 37, 30, 24, 18, 20, 14, 31, 27, 16, 40, 24, 29, 22, 14, 223, 223, 231, 96};

//: icon_receiver_voice_playing_001
Byte moduleFieldTitle[] = {17, 31, 98, 14, 127, 64, 169, 228, 167, 38, 114, 144, 136, 193, 7, 1, 13, 12, 253, 16, 3, 1, 3, 7, 20, 3, 16, 253, 20, 13, 7, 1, 3, 253, 14, 10, 255, 23, 7, 12, 5, 253, 206, 206, 207, 11};

//: icon_receiver_voice_playing
Byte moduleThingValue[] = {44, 27, 17, 12, 79, 157, 38, 38, 147, 155, 162, 214, 88, 82, 94, 93, 78, 97, 84, 82, 84, 88, 101, 84, 97, 78, 101, 94, 88, 82, 84, 78, 95, 91, 80, 104, 88, 93, 86, 45};

//: icon_receiver_voice_playing_w
Byte widgetFragileSternId[] = {12, 29, 56, 5, 99, 49, 43, 55, 54, 39, 58, 45, 43, 45, 49, 62, 45, 58, 39, 62, 55, 49, 43, 45, 39, 56, 52, 41, 65, 49, 54, 47, 39, 63, 68};

//: icon_receiver_voice_playing_004
Byte styleAfraidEvaluateDevice[] = {23, 31, 59, 14, 84, 146, 221, 221, 150, 91, 108, 102, 58, 219, 46, 40, 52, 51, 36, 55, 42, 40, 42, 46, 59, 42, 55, 36, 59, 52, 46, 40, 42, 36, 53, 49, 38, 62, 46, 51, 44, 36, 245, 245, 249, 170};

//: FFFKitEventNameTapAudio
Byte featureInspireName[] = {1, 23, 44, 12, 74, 248, 66, 180, 72, 96, 201, 122, 26, 26, 26, 31, 61, 72, 25, 74, 57, 66, 72, 34, 53, 65, 57, 40, 53, 68, 21, 73, 56, 61, 67, 168};

//: icon_receiver_voice_playing_003
Byte themeProcedureAlert[] = {15, 31, 30, 5, 17, 75, 69, 81, 80, 65, 84, 71, 69, 71, 75, 88, 71, 84, 65, 88, 81, 75, 69, 71, 65, 82, 78, 67, 91, 75, 80, 73, 65, 18, 18, 21, 233};

// __DEBUG__
// __CLOSE_PRINT__
//
//  SessionAudioCententView.m
//  NIMDemo
//
//  Created by chris.
//  Copyright (c) 2015年 Netease. All rights reserved.
//

// __M_A_C_R_O__
//: #import "ContinueSignerFile.h"
#import "ContinueSignerFile.h"
//: #import "WaitAfterHavenCacheLine.h"
#import "WaitAfterHavenCacheLine.h"
//: #import "FlexibleWinterSelfPreview.h"
#import "FlexibleWinterSelfPreview.h"
//: #import "UIImage+TowerTinyGranularLarge.h"
#import "UIImage+TowerTinyGranularLarge.h"
//: #import "TwistTideGorge.h"
#import "TwistTideGorge.h"
//: #import "TowerTinyGranularLarge.h"
#import "TowerTinyGranularLarge.h"
//: #import "UIColor+TowerTinyGranularLarge.h"
#import "UIColor+TowerTinyGranularLarge.h"

//: @interface ContinueSignerFile()<NIMMediaManagerDelegate>
@interface ContinueSignerFile()<NIMMediaManagerDelegate>

//: @property (nonatomic,strong) UILabel *durationLabel;
@property (nonatomic,strong) UILabel *scoop;
//: @property (nonatomic,strong) UIImageView *voiceImageView;
@property (nonatomic,strong) UIImageView *begin;

//: @property (nonatomic,strong) UIImageView *voicePlayViewleft;
@property (nonatomic,strong) UIImageView *curlBoard;
//: @property (nonatomic,strong) UIImageView *voicePlayView;
@property (nonatomic,strong) UIImageView *mine;

//: @property (nonatomic,strong) UIImageView *voiceImageViewleft;
@property (nonatomic,strong) UIImageView *adjustment;

//: @end
@end

//: @implementation ContinueSignerFile
@implementation ContinueSignerFile

//: #pragma mark - private methods
#pragma mark - private methods
//: - (void)stopPlayingUI
- (void)sternByTitle
{
    //: [self setPlaying:NO];
    [self setAction:NO];
}

//: - (BOOL)isPlaying
- (BOOL)scriptSpot
{
    //: BOOL play = [TwistTideGorge instance].currentPlayingMessage == self.model.message; 
    BOOL play = [TwistTideGorge randomCollect].portFactory == self.manage.signal; //对比是否是同一条消息，严格同一条，不能是相同ID，防止进了会话又进云端消息界面，导致同一个ID的云消息也在动画
    //: return play;
    return play;
}

//: - (void)dealloc
- (void)dealloc
{
    //: [[NSNotificationCenter defaultCenter] removeObserver:self];
    [[NSNotificationCenter defaultCenter] removeObserver:self];
    //: [[NIMSDK sharedSDK].mediaManager removeDelegate:self];
    [[NIMSDK sharedSDK].mediaManager removeDelegate:self];
}

//: #pragma mark - NIMMediaManagerDelegate
#pragma mark - NIMMediaManagerDelegate

//: - (void)playAudio:(NSString *)filePath didBeganWithError:(NSError *)error {
- (void)playAudio:(NSString *)filePath didBeganWithError:(NSError *)error {
    //: if(filePath && !error) {
    if(filePath && !error) {
        //: if (self.isPlaying && [self.audioUIDelegate respondsToSelector:@selector(startPlayingAudioUI)]) {
        if (self.scriptSpot && [self.trigger respondsToSelector:@selector(exclusiveSpectrum)]) {
            //: [self.audioUIDelegate startPlayingAudioUI];
            [self.trigger exclusiveSpectrum];
        }
    }
}

//: - (void)addVoiceView{
- (void)head{
    //: _audioBackgroundView = [[UIView alloc] initWithFrame:CGRectZero];
    _backgroundView = [[UIView alloc] initWithFrame:CGRectZero];
    //: _audioBackgroundView.layer.cornerRadius = 16.f;
    _backgroundView.layer.cornerRadius = 16.f;
    //: _audioBackgroundView.userInteractionEnabled = NO;
    _backgroundView.userInteractionEnabled = NO;
    //: [self addSubview:_audioBackgroundView];
    [self addSubview:_backgroundView];


    //: _voicePlayViewleft = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"icon_voice_play_b"]];
    _curlBoard = [[UIImageView alloc]initWithImage:[UIImage imageNamed:StringFromExceptData(appFirePlatform)]];
    //: [self addSubview:_voicePlayViewleft];
    [self addSubview:_curlBoard];
    //: _voicePlayViewleft.hidden = YES;
    _curlBoard.hidden = YES;
    //: _voicePlayView = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"icon_voice_play_b"]];
    _mine = [[UIImageView alloc]initWithImage:[UIImage imageNamed:StringFromExceptData(appFirePlatform)]];
    //: [self addSubview:_voicePlayView];
    [self addSubview:_mine];
    //: _voicePlayView.hidden = YES;
    _mine.hidden = YES;

    //: UIImage *image = [UIImage imageNamed:@"icon_receiver_voice_playing_w"];
    UIImage *image = [UIImage imageNamed:StringFromExceptData(widgetFragileSternId)];
    //: _voiceImageView = [[UIImageView alloc] initWithImage:image];
    _begin = [[UIImageView alloc] initWithImage:image];
    //: NSArray *animateNames = @[@"icon_receiver_voice_playing_001",@"icon_receiver_voice_playing_002",@"icon_receiver_voice_playing_003",@"icon_receiver_voice_playing_004",@"icon_receiver_voice_playing_005",@"icon_receiver_voice_playing_006",@"icon_receiver_voice_playing_007",@"icon_receiver_voice_playing_008",@"icon_receiver_voice_playing_009",@"icon_receiver_voice_playing_010"];
    NSArray *animateNames = @[StringFromExceptData(moduleFieldTitle),StringFromExceptData(coreTotaloOvaData),StringFromExceptData(themeProcedureAlert),StringFromExceptData(styleAfraidEvaluateDevice),StringFromExceptData(colorSingerPreference),StringFromExceptData(viewDarkText),StringFromExceptData(widgetDessertValue),StringFromExceptData(themePermissionTimer),StringFromExceptData(viewMotiveError),StringFromExceptData(themeEcruPath)];
    //: NSMutableArray * animationImages = [[NSMutableArray alloc] initWithCapacity:animateNames.count];
    NSMutableArray * animationImages = [[NSMutableArray alloc] initWithCapacity:animateNames.count];
    //: for (NSString * animateName in animateNames) {
    for (NSString * animateName in animateNames) {
        //: UIImage * animateImage = [UIImage imageNamed:animateName];
        UIImage * animateImage = [UIImage imageNamed:animateName];
        //: [animationImages addObject:animateImage];
        [animationImages addObject:animateImage];
    }
    //: _voiceImageView.animationImages = animationImages;
    _begin.animationImages = animationImages;
    //: _voiceImageView.animationDuration = 1.0;
    _begin.animationDuration = 1.0;
    //: [self addSubview:_voiceImageView];
    [self addSubview:_begin];
    //: _voiceImageView.hidden = YES;
    _begin.hidden = YES;

    //: _voiceImageViewleft = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon_receiver_voice_playing"]];
    _adjustment = [[UIImageView alloc] initWithImage:[UIImage imageNamed:StringFromExceptData(moduleThingValue)]];
    //: NSArray *animateNames2 = @[@"icon_receiver_voice_playing_001",@"icon_receiver_voice_playing_002",@"icon_receiver_voice_playing_003",@"icon_receiver_voice_playing_004",@"icon_receiver_voice_playing_005",@"icon_receiver_voice_playing_006",@"icon_receiver_voice_playing_007",@"icon_receiver_voice_playing_008",@"icon_receiver_voice_playing_009",@"icon_receiver_voice_playing_010"];
    NSArray *animateNames2 = @[StringFromExceptData(moduleFieldTitle),StringFromExceptData(coreTotaloOvaData),StringFromExceptData(themeProcedureAlert),StringFromExceptData(styleAfraidEvaluateDevice),StringFromExceptData(colorSingerPreference),StringFromExceptData(viewDarkText),StringFromExceptData(widgetDessertValue),StringFromExceptData(themePermissionTimer),StringFromExceptData(viewMotiveError),StringFromExceptData(themeEcruPath)];
    //: NSMutableArray *animationImages2 = [[NSMutableArray alloc] initWithCapacity:animateNames2.count];
    NSMutableArray *animationImages2 = [[NSMutableArray alloc] initWithCapacity:animateNames2.count];
    //: for (NSString *animateName2 in animateNames2) {
    for (NSString *animateName2 in animateNames2) {
        //: UIImage *animateImage2 = [UIImage imageNamed:animateName2];
        UIImage *animateImage2 = [UIImage imageNamed:animateName2];
        //: [animationImages2 addObject:animateImage2];
        [animationImages2 addObject:animateImage2];
    }
    //: _voiceImageViewleft.animationImages = animationImages2;
    _adjustment.animationImages = animationImages2;
    //: _voiceImageViewleft.animationDuration = 1.0;
    _adjustment.animationDuration = 1.0;
    //: [self addSubview:_voiceImageViewleft];
    [self addSubview:_adjustment];
    //: _voiceImageViewleft.hidden = YES;
    _adjustment.hidden = YES;

    //: _durationLabel = [[UILabel alloc] initWithFrame:CGRectZero];
    _scoop = [[UILabel alloc] initWithFrame:CGRectZero];
    //: _durationLabel.backgroundColor = [UIColor clearColor];
    _scoop.backgroundColor = [UIColor clearColor];
    //: [self addSubview:_durationLabel];
    [self addSubview:_scoop];

}

//: - (void)layoutSubviews{
- (void)layoutSubviews{
    //: [super layoutSubviews];
    [super layoutSubviews];
    //: UIEdgeInsets contentInsets = self.model.contentViewInsets;
    UIEdgeInsets contentInsets = self.manage.titleOpinionInsets;
    //: switch (self.layoutStyle) {
    switch (self.worldStorm) {
        //: case PackFlowVerifyLayoutLeft: {
        case PackFlowVerifyLayoutLeft: {
//            _voiceImageView.transform = CGAffineTransformIdentity;
//            self.voiceImageView.left = contentInsets.left * 2;
            //: self.voiceImageViewleft.left = contentInsets.left * 2;
            self.adjustment.empty = contentInsets.left * 2;
             //: _durationLabel.right = self.width - contentInsets.right * 2;
             _scoop.translate = self.triggerWidth - contentInsets.right * 2;
            //: break;
            break;
        }
        //: case PackFlowVerifyLayoutRight: {
        case PackFlowVerifyLayoutRight: {
//            _voiceImageView.transform = CGAffineTransformMakeRotation(M_PI);
            //: self.voiceImageView.right = self.width - contentInsets.right * 2;
            self.begin.translate = self.triggerWidth - contentInsets.right * 2;
            //: _durationLabel.left = contentInsets.left;
            _scoop.empty = contentInsets.left;
            //: break;
            break;
        }
        //: case PackFlowVerifyLayoutAuto:
        case PackFlowVerifyLayoutAuto:
        //: default:
        default:
        {
            //: if (self.model.message.isOutgoingMsg) {
            if (self.manage.signal.isOutgoingMsg) {
//                _voiceImageView.transform = CGAffineTransformMakeRotation(M_PI);


                //: self.voicePlayView.left = contentInsets.left;
                self.mine.empty = contentInsets.left;
                //: self.voiceImageView.left = self.voicePlayView.right+10;
                self.begin.empty = self.mine.translate+10;
                //: _durationLabel.left = self.voiceImageView.right+10;
                _scoop.empty = self.begin.translate+10;

            //: } else {
            } else {
//                _voiceImageView.transform = CGAffineTransformIdentity;
//               self.voiceImageView.left = contentInsets.left;

                //: self.voicePlayViewleft.left = contentInsets.left;
                self.curlBoard.empty = contentInsets.left;
                //: self.voiceImageViewleft.left = self.voicePlayViewleft.right+10;
                self.adjustment.empty = self.curlBoard.translate+10;
                //: _durationLabel.left = self.voiceImageViewleft.right+10;
                _scoop.empty = self.adjustment.translate+10;
            }
            //: break;
            break;
        }
    }
    //: _voiceImageView.width = 62;
    _begin.triggerWidth = 62;
    //: _voiceImageView.height = 18;
    _begin.renderTower = 18;
    //: _voiceImageView.centerY = self.height * .5f;
    _begin.instance = self.renderTower * .5f;

    //: _voiceImageViewleft.width = 62;
    _adjustment.triggerWidth = 62;
    //: _voiceImageViewleft.height = 18;
    _adjustment.renderTower = 18;
    //: _voiceImageViewleft.centerY = self.height * .5f;
    _adjustment.instance = self.renderTower * .5f;

    //: _voicePlayView.width = 16;
    _mine.triggerWidth = 16;
    //: _voicePlayView.height = 16;
    _mine.renderTower = 16;
    //: _voicePlayView.centerY = self.height * .5f;
    _mine.instance = self.renderTower * .5f;

    //: _voicePlayViewleft.width = 16;
    _curlBoard.triggerWidth = 16;
    //: _voicePlayViewleft.height = 16;
    _curlBoard.renderTower = 16;
    //: _voicePlayViewleft.centerY = self.height * .5f;
    _curlBoard.instance = self.renderTower * .5f;

    //: _durationLabel.centerY = _voiceImageView.centerY;
    _scoop.instance = _begin.instance;

    //: CGFloat backgroundWidth = 0;
    CGFloat backgroundWidth = 0;
    //: CGFloat backgroundLeft = 0;
    CGFloat backgroundLeft = 0;
    //: switch (self.layoutStyle) {
    switch (self.worldStorm) {
        //: case PackFlowVerifyLayoutLeft:
        case PackFlowVerifyLayoutLeft:
            {
                //: backgroundWidth = self.width - contentInsets.left * .5f - 2;
                backgroundWidth = self.triggerWidth - contentInsets.left * .5f - 2;
                //: backgroundLeft = contentInsets.left * .5f;
                backgroundLeft = contentInsets.left * .5f;
            }
            //: break;
            break;
        //: case PackFlowVerifyLayoutRight:
        case PackFlowVerifyLayoutRight:
            {
                //: backgroundWidth = self.width - 2 - contentInsets.right * .5f;
                backgroundWidth = self.triggerWidth - 2 - contentInsets.right * .5f;
                //: backgroundLeft = 2;
                backgroundLeft = 2;
            }
            //: break;
            break;
        //: default:
        default:
        {
            //: if (self.model.message.isOutgoingMsg) {
            if (self.manage.signal.isOutgoingMsg) {
                //: backgroundWidth = self.width - 2 - contentInsets.right * .5f;
                backgroundWidth = self.triggerWidth - 2 - contentInsets.right * .5f;
                //: backgroundLeft = 2;
                backgroundLeft = 2;
            //: } else {
            } else {
                //: backgroundWidth = self.width - contentInsets.left * .5f - 2;
                backgroundWidth = self.triggerWidth - contentInsets.left * .5f - 2;
                //: backgroundLeft = contentInsets.left * .5f;
                backgroundLeft = contentInsets.left * .5f;
            }
            //: break;
            break;
        }
    }
    //: _audioBackgroundView.size = CGSizeMake(backgroundWidth,
    _backgroundView.providerSize = CGSizeMake(backgroundWidth,
                                               //: self.height - 4);
                                               self.renderTower - 4);
    //: _audioBackgroundView.left = backgroundLeft;
    _backgroundView.empty = backgroundLeft;
    //: _audioBackgroundView.top = 2;
    _backgroundView.civil = 2;
}

//: -(void)onTouchUpInside:(id)sender
-(void)toInside:(id)sender
{
    //: if ([self.model.message attachmentDownloadState]== NIMMessageAttachmentDownloadStateFailed
    if ([self.manage.signal attachmentDownloadState]== NIMMessageAttachmentDownloadStateFailed
        //: || [self.model.message attachmentDownloadState] == NIMMessageAttachmentDownloadStateNeedDownload) {
        || [self.manage.signal attachmentDownloadState] == NIMMessageAttachmentDownloadStateNeedDownload) {
        //: [[[NIMSDK sharedSDK] chatManager] fetchMessageAttachment:self.model.message
        [[[NIMSDK sharedSDK] chatManager] fetchMessageAttachment:self.manage.signal
                                                           //: error:nil];
                                                           error:nil];
        //: return;
        return;
    }
    //: if ([self.model.message attachmentDownloadState] == NIMMessageAttachmentDownloadStateDownloaded) {
    if ([self.manage.signal attachmentDownloadState] == NIMMessageAttachmentDownloadStateDownloaded) {

        //: if ([[NIMSDK sharedSDK].mediaManager isPlaying]) {
        if ([[NIMSDK sharedSDK].mediaManager isPlaying]) {
            //: [self stopPlayingUI];
            [self sternByTitle];
        }

        //: GracefulMixerAmongCollectionPreload *event = [[GracefulMixerAmongCollectionPreload alloc] init];
        GracefulMixerAmongCollectionPreload *event = [[GracefulMixerAmongCollectionPreload alloc] init];
        //: event.eventName = @"FFFKitEventNameTapAudio";
        event.nim = StringFromExceptData(featureInspireName);
        //: event.messageModel = self.model;
        event.sparkMessageModel = self.manage;
        //: [self.delegate onCatchEvent:event];
        [self.manHiveTransformerses miracling:event];

    }
}

//: - (void)stopPlayAudio:(NSString *)filePath didCompletedWithError:(nullable NSError *)error
- (void)stopPlayAudio:(NSString *)filePath didCompletedWithError:(nullable NSError *)error
{
    //: [self stopPlayingUI];
    [self sternByTitle];
}

//: - (void)refresh:(FlexibleWinterSelfPreview *)data {
- (void)someStickNim:(FlexibleWinterSelfPreview *)data {
    //: [super refresh:data];
    [super someStickNim:data];
    //: NIMAudioObject *object = self.model.message.messageObject;
    NIMAudioObject *object = self.manage.signal.messageObject;
    //: self.durationLabel.text = [NSString stringWithFormat:@"%zd\"",(NSInteger)((object.duration+500)/1000)];
    self.scoop.text = [NSString stringWithFormat:@"%zd\"",(NSInteger)((object.duration+500)/1000)];//四舍五入

    //: DecoderWarehouseSelectCavern *setting = [[TowerTinyGranularLarge sharedKit].config setting:data.message];
    DecoderWarehouseSelectCavern *setting = [[TowerTinyGranularLarge basicDragKit].arcSolarStrength phoneSystem:data.signal];

    //: self.durationLabel.font = setting.font;
    self.scoop.font = setting.cubatureUnitFont;
    //: self.durationLabel.textColor = setting.textColor;
    self.scoop.textColor = setting.mustBridge;
    //: [self.durationLabel sizeToFit];
    [self.scoop sizeToFit];

    //: [self setPlaying:self.isPlaying];
    [self setAction:self.scriptSpot];
    //: [self refreshBackground:data];
    [self dualHeritageExtend:data];
}

//: -(instancetype)initSessionMessageContentView{
-(instancetype)initHonorable{
    //: self = [super initSessionMessageContentView];
    self = [super initHonorable];
    //: if (self) {
    if (self) {
        //: [self addVoiceView];
        [self head];
        //: [[NIMSDK sharedSDK].mediaManager addDelegate:self];
        [[NIMSDK sharedSDK].mediaManager addDelegate:self];
    }
    //: return self;
    return self;
}

//: - (void)playAudio:(NSString *)filePath didCompletedWithError:(NSError *)error
- (void)playAudio:(NSString *)filePath didCompletedWithError:(NSError *)error
{
    //: [self stopPlayingUI];
    [self sternByTitle];
}

//: - (void)refreshBackground:(FlexibleWinterSelfPreview *)data
- (void)dualHeritageExtend:(FlexibleWinterSelfPreview *)data
{
    //: if (data.shouldShowLeft)
    if (data.owner)
    {
        //: _voiceImageViewleft.hidden = NO;
        _adjustment.hidden = NO;
        //: _voiceImageView.hidden = YES;
        _begin.hidden = YES;
        //: _voicePlayViewleft.hidden = NO;
        _curlBoard.hidden = NO;
        //: _voicePlayView.hidden = YES;
        _mine.hidden = YES;
    }
    //: else
    else
    {
//        _voiceImageView.image = [UIImage imageNamed:@"icon_receiver_voice_playing_w"];
        //: _voiceImageViewleft.hidden = YES;
        _adjustment.hidden = YES;
        //: _voiceImageView.hidden = NO;
        _begin.hidden = NO;
        //: _voicePlayViewleft.hidden = YES;
        _curlBoard.hidden = YES;
        //: _voicePlayView.hidden = NO;
        _mine.hidden = NO;
    }
}

//: - (void)setPlaying:(BOOL)isPlaying
- (void)setAction:(BOOL)isPlaying
{
    //: if (isPlaying) {
    if (isPlaying) {
        //: [self.voiceImageView startAnimating];
        [self.begin startAnimating];
        //: [self.voiceImageViewleft startAnimating];
        [self.adjustment startAnimating];
        //: _voicePlayViewleft.image = [UIImage imageNamed:@"icon_voice_plus_b"];
        _curlBoard.image = [UIImage imageNamed:StringFromExceptData(layoutWorkerQuadTitle)];
//        _voicePlayView.image = [UIImage imageNamed:@"icon_voice_plus_w"];
        //: _voicePlayView.image = [UIImage imageNamed:@"icon_voice_plus_b"];
        _mine.image = [UIImage imageNamed:StringFromExceptData(layoutWorkerQuadTitle)];
    //: }else{
    }else{
        //: [self.voiceImageView stopAnimating];
        [self.begin stopAnimating];
        //: [self.voiceImageViewleft stopAnimating];
        [self.adjustment stopAnimating];
        //: _voicePlayViewleft.image = [UIImage imageNamed:@"icon_voice_play_b"];
        _curlBoard.image = [UIImage imageNamed:StringFromExceptData(appFirePlatform)];
//        _voicePlayView.image = [UIImage imageNamed:@"icon_voice_play_w"];
        //: _voicePlayView.image = [UIImage imageNamed:@"icon_voice_play_b"];
        _mine.image = [UIImage imageNamed:StringFromExceptData(appFirePlatform)];
    }
}


//- (NSString *)convertToTimeStringWithTimeInterval:(NSTimeInterval)timeInterval{
//    NSDate *date = [NSDate dateWithTimeIntervalSince1970:timeInterval];
//    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
//    [dateFormatter setDateFormat:@"HH:mm"];
//    NSString *dateStsring = [dateFormatter stringFromDate:date];
//    return dateStsring;
//}

//: @end
@end

Byte * ExceptDataToCache(Byte *data) {
    int manifestly = data[0];
    int setAbout = data[1];
    Byte orientationNock = data[2];
    int screenIndependence = data[3];
    if (!manifestly) return data + screenIndependence;
    for (int i = screenIndependence; i < screenIndependence + setAbout; i++) {
        int value = data[i] + orientationNock;
        if (value > 255) {
            value -= 256;
        }
        data[i] = value;
    }
    data[0] = 0;
    data[screenIndependence + setAbout] = 0;
    return data + screenIndependence;
}

NSString *StringFromExceptData(Byte *data) {
    return [NSString stringWithUTF8String:(char *)ExceptDataToCache(data)];
}
